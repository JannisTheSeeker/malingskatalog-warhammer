
<!DOCTYPE html>
<html lang="no">
<head>
    <meta charset="UTF-8">
    <title>Malingskatalog Warhammer</title>
    <style>
        :root {
            --bg-color: #111;
            --text-color: #f0f0f0;
            --accent-color: #ffd700;
            --border-color: #444;
            --input-bg: #222;
        }

        body {
            background-color: var(--bg-color);
            color: var(--text-color);
            font-family: Arial, sans-serif;
            margin: 1rem;
        }

        h1 {
            color: var(--accent-color);
        }

        input[type="text"] {
            background-color: var(--input-bg);
            color: var(--text-color);
            border: 1px solid var(--border-color);
            padding: 0.5rem;
            width: 100%;
            max-width: 400px;
            font-size: 1rem;
            margin-bottom: 1rem;
            border-radius: 4px;
        }

        button {
            background-color: #333;
            color: var(--accent-color);
            border: 1px solid #666;
            padding: 0.4rem 0.75rem;
            margin: 0.2rem;
            cursor: pointer;
            border-radius: 4px;
            font-weight: bold;
            transition: background-color 0.2s ease;
        }

        button:hover {
            background-color: #444;
        }

        button.active {
            background-color: #ffd700;
            color: #000;
        }

        table {
            width: 100%;
            border-collapse: collapse;
        }

        th, td {
            border: 1px solid var(--border-color);
            padding: 0.5rem;
            text-align: left;
        }

        th {
            background-color: #222;
        }

        .swatch {
            display: inline-block;
            width: 16px;
            height: 16px;
            margin-right: 8px;
            border: 1px solid #000;
            vertical-align: middle;
        }
    </style>
</head>
<body>
    <h1>üé® Malingskatalog ‚Äì Warhammer 40K</h1>

    <input type="password" id="editPassword" placeholder="üîí Skriv inn passord for √• redigere">
    <button onclick="unlockEditing()">L√•s opp redigering</button>
    <span id="unlockMessage" style="margin-left:1rem;color:#aaa;"></span>

    <br><br>
    <input type="text" id="searchInput" placeholder="üîç S√∏k i tabellen...">

    <div id="statusButtons">
        <button onclick="filterStatus('ALL')">Vis alle status</button>
        <button onclick="filterStatus('‚úÖ')">‚úÖ Har</button>
        <button onclick="filterStatus('‚ùå')">‚ùå Mangler</button>
    </div>

    <div id="filterButtons">
        <button onclick="filterCategory('ALL')">Vis alle kategorier</button>
        <button onclick="filterCategory('Base')">Base</button>
        <button onclick="filterCategory('Layer')">Layer</button>
        <button onclick="filterCategory('Shade')">Shade</button>
        <button onclick="filterCategory('Technical')">Technical</button>
        <button onclick="filterCategory('Contrast')">Contrast</button>
    </div>

    <table id="paintTable">
        <thead>
            <tr>
                <th>Kategori</th>
                <th>Navn</th>
                <th>Status</th>
            </tr>
        </thead>
        <tbody>
            <tr><td>Base</td><td><div class="swatch" style="background-color:#882020;"></div>Khorne Red</td><td>‚úÖ</td></tr>
            <tr><td>Layer</td><td><div class="swatch" style="background-color:#f7d560;"></div>Yriel Yellow</td><td>‚úÖ</td></tr>
            <tr><td>Shade</td><td><div class="swatch" style="background-color:#3e2f25;"></div>Agrax Earthshade</td><td>‚úÖ</td></tr>
            <tr><td>Contrast</td><td><div class="swatch" style="background-color:#c6b47c;"></div>Skeleton Horde</td><td>‚ùå</td></tr>
        </tbody>
    </table>

    <br>
    <button onclick="downloadCSV()">‚¨áÔ∏è Last ned som CSV</button>

    <script>
        let editingUnlocked = false;

        function unlockEditing() {
            const pw = document.getElementById("editPassword").value;
            const msg = document.getElementById("unlockMessage");
            if (pw === "Hansa") {
                editingUnlocked = true;
                msg.innerText = "‚úÖ Redigering aktivert!";
                msg.style.color = "#00ff88";
                enableEditing();
            } else {
                msg.innerText = "‚ùå Feil passord!";
                msg.style.color = "#ff4444";
            }
        }

        function enableEditing() {
            document.querySelectorAll("#paintTable td").forEach(cell => {
                cell.onclick = function () {
                    if (!editingUnlocked || cell.querySelector("input")) return;
                    const original = cell.innerText;
                    const input = document.createElement("input");
                    input.value = original;
                    input.style.width = "100%";
                    cell.innerText = "";
                    cell.appendChild(input);
                    input.focus();
                    input.onblur = () => cell.innerText = input.value || original;
                    input.onkeydown = e => {
                        if (e.key === "Enter") input.blur();
                        if (e.key === "Escape") cell.innerText = original;
                    };
                };
            });
        }

        function filterCategory(category) {
            setActiveButton("filterButtons", category);
            const rows = document.querySelectorAll("#paintTable tbody tr");
            rows.forEach(row => {
                const cat = row.querySelector("td");
                row.style.display = (category === "ALL" || cat.textContent.trim() === category) ? "" : "none";
            });
        }

        function filterStatus(status) {
            setActiveButton("statusButtons", status);
            const rows = document.querySelectorAll("#paintTable tbody tr");
            rows.forEach(row => {
                const statusCell = row.querySelector("td:last-child");
                row.style.display = (status === "ALL" || statusCell.textContent.includes(status)) ? "" : "none";
            });
        }

        function setActiveButton(containerId, value) {
            const buttons = document.querySelectorAll(`#${containerId} button`);
            buttons.forEach(btn => {
                btn.classList.remove("active");
                if (btn.innerText.includes(value) || (value === "ALL" && btn.innerText.includes("Vis alle"))) {
                    btn.classList.add("active");
                }
            });
        }

        function downloadCSV() {
            const rows = document.querySelectorAll("#paintTable tr");
            let csvContent = "";
            rows.forEach(row => {
                const cols = row.querySelectorAll("td, th");
                const rowData = [];
                cols.forEach(col => {
                    rowData.push(col.innerText.replace(/\n/g, "").trim());
                });
                csvContent += rowData.join(",") + "\n";
            });
            const blob = new Blob([csvContent], { type: "text/csv;charset=utf-8;" });
            const url = URL.createObjectURL(blob);
            const link = document.createElement("a");
            link.setAttribute("href", url);
            link.setAttribute("download", "malingskatalog.csv");
            link.click();
        }

        window.onload = function () {
            document.getElementById("editPassword").addEventListener("keydown", function(e) {
                if (e.key === "Enter") unlockEditing();
            });

            document.getElementById("searchInput").addEventListener("input", function() {
                const filter = this.value.toLowerCase();
                const rows = document.querySelectorAll("#paintTable tbody tr");
                rows.forEach(row => {
                    const text = row.textContent.toLowerCase();
                    row.style.display = text.includes(filter) ? "" : "none";
                });
            });
        };
    </script>
</body>
</html>
